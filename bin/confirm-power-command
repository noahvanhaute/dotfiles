#!/usr/bin/env bash

theme='window { width: 99%; }
	inputbar { enabled: false; }
	listview { lines: 1; }
	element-icon {enabled: false; }
	element-text { horizontal-align: 0.5; }
	element selected.normal {
		background-color: @base03;
		color:            @base0;
	}'

command=$1

if [[ -z "$command" ]]; then
	echo 'Usage: confirm-power-command command'
	exit 1
elif [[ "$command" != 'poweroff' && "$command" != 'reboot' ]]; then
	echo "Unknown command '$command'"
	exit 1
fi

answer=$(echo "Really $command?" | rofi -theme-str "$theme" -dmenu)

case $answer in
	"Really $command?")
		systemctl "$command" ;;
	*)
		exit 1 ;;
esac
